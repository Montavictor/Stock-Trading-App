<h1 class="text-3xl font-bold mb-6 text-indigo-900">Pending Users</h1>
  <%= search_form_for @q, url: admin_pending_path, method: :get, class: "mb-6" do |f| %>
  <div class="flex flex-wrap gap-4 items-end">
    <div>
      <%= f.label :username_cont, "Username", class: "block text-sm font-medium text-indigo-800" %>
      <%= f.search_field :username_cont, class: "mt-1 p-2 border border-gray-300 rounded-md w-48 hover:border-indigo-600" %>
    </div>

    <div>
      <%= f.label :email_cont, "Email", class: "block text-sm font-medium text-indigo-800" %>
      <%= f.search_field :email_cont, class: "mt-1 p-2 border border-gray-300 rounded-md w-48 hover:border-indigo-600" %>
    </div>
    <div>
      <button type="submit" class="bg-indigo-500 hover:bg-indigo-600 text-white px-4 py-2 rounded-md flex items-center gap-2 hover:cursor-pointer">
        <i class="fa-solid fa-magnifying-glass mr-2"></i> 
        Search
      </button>
    </div>
  </div>
<% end %>  
<table class="min-w-full border border-gray-200 shadow-sm rounded-md">
    <thead class="bg-indigo-100">
      <tr>
        <th class="px-4 py-2 text-center font-lg text-indigo-900 font-bold ">ID</th>
        <th class="px-4 py-2 text-left font-lg text-indigo-900 font-bold">User</th>
        <th class="px-4 py-2 text-left font-lg text-indigo-900 font-bold">Date Created</th>
        <th class="px-4 py-2 text-center font-lg text-indigo-900 font-bold">Balance</th>
        <th class="px-4 py-2 text-center font-lg text-indigo-900 font-bold">Status</th>
        <th class="px-4 py-2 text-center font-lg text-indigo-900 font-bold">Actions</th>
      </tr>
    </thead>
    <tbody class="divide-y divide-gray-200 text-sm">
      <% if @users.any? %>
        <% @users.each do |user| %>
          <tr class="hover:bg-indigo-50">
            <td class="px-4 py-2 text-indigo-900 text-center"><%= user.id %></td>
            <td class="px-4 py-2 ">        
              <div class="font-semibold text-md text-indigo-800"><%= user.username %></div>
              <div class="text-xs text-gray-500"><%= user.email %></div>
            </td>
            <td class="px-4 py-2 leading-tight">
              <div class="font-semibold text-sm text-indigo-900">
                <%= user.created_at.strftime("%B %d, %Y") %>
              </div>
              <div class="text-xs text-gray-600">
                <%= user.created_at.strftime("%I:%M %p") %>
              </div>
            </td>
            <td class="px-4 py-2 text-center"><%= number_to_currency(user.balance) %></td>
            <td class="px-4 py-2 text-center <%= user.status ? 'bg-green-100 text-green-800' : 'bg-yellow-100 text-yellow-800' %>">
              <span class="inline-block px-2 py-1 text-md font-semibold rounded-full ">
                <%= user.status ? "Approved" : "Pending" %>
              </span>
            </td>
            <td class="px-4 py-2 space-x-2 text-center">
              <%= button_to "Approve", approve_admin_user_path(user),
                method: :patch,
                class: "inline-block bg-green-600 hover:bg-emerald-700  hover:cursor-pointer  text-white text-sm font-medium px-4 py-2 rounded-md mb-1",
                form: { class: "inline" },
                data: { turbo_confirm: "Approve this user?" } %>
  
              <%= link_to "Decline", admin_user_path(user, from: "pending"),
                data: { turbo_method: :delete, turbo_confirm: "Decline this user?" },
                class: "inline-block bg-rose-700 hover:bg-rose-800 text-white text-sm font-medium px-4 py-2 rounded-md" %>
            </td>
          </tr>
        <% end %>
      <% else %>
        <tr>
          <td colspan="6" class="px-4 py-4 text-center text-gray-500">
            <h3 class="text-lg font-medium">No pending users</h3>
          </td>
        </tr>
    <% end %>
  </tbody>
</table>
