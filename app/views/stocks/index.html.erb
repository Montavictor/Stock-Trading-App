<h1 class="text-3xl font-bold mb-2 text-indigo-900">My Portfolio</h1>
<div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 mb-8">
  <div class="bg-white shadow-md rounded-lg border border-gray-100 p-6 flex flex-col justify-between">
    <div>
      <div class="text-md text-gray-500 mb-2">Account Balance</div>
      <div class="text-3xl font-bold text-green-600">
        <%= number_to_currency(current_user.balance, precision: 2) %>
      </div>
    </div>
  </div>

  <div class="bg-white shadow-md rounded-lg border border-gray-100 p-6 flex flex-col justify-between">
    <div>
      <div class="text-md text-gray-500 mb-2">No. of Companies</div>
      <div class="text-3xl font-bold text-green-600"><%= @stocks_total.count %></div>
    </div>
  </div>

  <div class="bg-white shadow-md rounded-lg border border-gray-100 p-6 flex flex-col justify-between">
    <div>
      <div class="text-md text-gray-500 mb-2">Total Stocks Owned</div>
      <div class="text-3xl font-bold text-green-600"><%= @stocks_total.sum(:quantity) %></div>
    </div>
  </div>
</div>

<div class="mx-auto flex justify-center">
  <%= search_form_for @q, url: stocks_path, method: :get, class: "mb-4" do |f| %>
    <div class="flex flex-wrap gap-4 items-end">
      <div>
        <%= f.label :company_name_cont, "Company Name", class: "block text-sm font-bold text-indigo-800" %>
        <%= f.text_field :company_name_cont, class: "mt-1 p-2 border border-gray-300 rounded-md w-48 hover:border-indigo-600 focus:outline-none focus:ring-2 focus:ring-indigo-300" %>
      </div>
      <div>
        <%= f.submit "Search", class: "bg-green-600 text-white px-3 py-1 rounded mb-1" %>
      </div>
      </div>
  <% end %>
</div>

<div class="overflow-x-auto bg-white shadow-md rounded-lg w-1/2 mx-auto overflow-auto max-h-96">
  <table class="min-w-full table-auto border-separate border-spacing-y-2 text-sm text-gray-700">
    <thead class="bg-indigo-100">
      <tr>
        <th class="px-4 py-2 text-left font-lg text-indigo-900 font-bold">Company Name</th>
        <th class="px-4 py-2 text-left font-lg text-indigo-900 font-bold">Quantity</th>
        <th class="px-4 py-2 text-center font-lg text-indigo-900 font-bold">Actions</th>
      </tr>
    </thead>
    <tbody class="divide-y divide-gray-200">
      <% if @stocks.any? %>
        <% @stocks.each do |stock| %>
          <tr class="hover:bg-indigo-50 transition-colors duration-200">
            <td class="px-4 py-2 rounded-l-lg"><%= stock.company_name %></td>
            <td class="px-4 py-2 rounded-l-lg"><%= stock.quantity %></td>
            <td class="px-4 py-2 rounded-l-lg text-center">
            <span>
              <%= link_to "Sell", input_quantity_path(transaction_type: "Sell", symbol: stock.company_name), class: "bg-green-600 hover:bg-green-700 text-white px-2 py-1 rounded-md font-medium w-fit"%></span>
            </td>
          </tr>
        <% end %>
      <% else %>
        <tr>
          <td colspan="8" class="text-center py-4 text-gray-600">No stocks yet</td>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>
